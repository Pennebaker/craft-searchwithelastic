{#
/**
 * Search w/Elastic plugin for Craft CMS 4.x
 *
 * Provides high-performance search across all content types with real-time
 * indexing, advanced querying, and production reliability.
 *
 * @link https://www.pennebaker.com
 * @copyright Copyright (c) 2025 Pennebaker
 */
#}

{#
/**
 * Configuration Override Warning Icon
 *
 * Displays a warning triangle icon next to settings that are overridden
 * by configuration files. Provides visual feedback to users about which
 * settings cannot be modified through the control panel interface.
 *
 * @param string setting - The setting name (currently unused but kept for compatibility)
 */
#}
{% macro configWarning(setting) %}
    <span class="config-override-alert" title="{{ 'This column is overridden by configuration file'|t('search-with-elastic') }}">
        <svg width="12" height="12" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M12 2L22 20H2L12 2Z" fill="#e5a100" stroke="#e5a100" stroke-width="2" stroke-linejoin="round"/>
            <path d="M12 9V13" stroke="white" stroke-width="2" stroke-linecap="round"/>
            <circle cx="12" cy="17" r="1" fill="white"/>
        </svg>
    </span>
{% endmacro %}

{#
/**
 * Alert Triangle Icon
 *
 * Renders a warning triangle SVG icon to indicate configuration overrides.
 * This is the primary macro used throughout the settings interface to mark
 * fields that are controlled by configuration files rather than the UI.
 */
#}
{% macro alertTriangle() %}
    <span class="config-override-alert" title="{{ 'This column is overridden by configuration file'|t('search-with-elastic') }}">
        <svg width="12" height="12" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M12 2L22 20H2L12 2Z" fill="#e5a100" stroke="#e5a100" stroke-width="2" stroke-linejoin="round"/>
            <path d="M12 9V13" stroke="white" stroke-width="2" stroke-linecap="round"/>
            <circle cx="12" cy="17" r="1" fill="white"/>
        </svg>
    </span>
{% endmacro %}

{# CSS for configuration override alerts - using CraftCMS patterns #}
{% css %}
.config-override-alert {
    display: inline-block;
    margin-left: 4px;
    vertical-align: middle;
    cursor: help;
}

.config-override-alert svg {
    display: block;
}

/* Ensure table headers with override alerts don't wrap */
th:has(.config-override-alert) {
    white-space: nowrap;
}

/* Fallback for browsers that don't support :has() */
.table-header-with-alert {
    white-space: nowrap;
}
{% endcss %}
